<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>じゃんけん</title>

        <!-- CSS読み込み -->
        <link rel="stylesheet" href="css/style.css" />

        <!-- jQuery読み込み -->
        <script src="js/jquery-3.7.1.min.js"></script>
    </head>
<body>
<header>
    <h1>じゃんけん</h1>
</header>

<main>
    <div class="card">
        <ul class="choices">
            <li id="gu" class="choice-btn">✊ グー</li>
            <li id="choki" class="choice-btn">✌️ チョキ</li>
            <li id="pa" class="choice-btn">✋ パー</li>
        </ul>
        <div class="result-area">
            <div>
                コンピュータの手：「<span id="pc-hand">まだ選んでいません</span>」
            </div>
            <div id="result" class="result">手を選んでください</div>
    
            <button id="restart-btn" style="display:none; margin-top: 20px;">もう一度勝負する！</button>
        </div>
    </div>
</main>

<script>
// じゃんけんアプリ概要 -----------------------------------------------
// 
// 【基本機能】
// - プレイヤーがグー・チョキ・パーのボタンをクリックできる
// - コンピュータがランダムに手を選ぶ
// - 勝敗を判定して結果を表示する
// - 結果に応じて色分け表示する
// 
// 【画面構成】
// - #gu ボタン: グーを選択
// - #choki ボタン: チョキを選択  
// - #pa ボタン: パーを選択
// - #pc-hand: コンピュータの手を表示
// - #result: 勝敗結果を表示
// 
// ---------------------------------------------------------------

// じゃんけんゲームの JavaScript を記述してください！
// -------------------------------------------------
// 1. じゃんけんの処理
// -------------------------------------------------
$(".choice-btn").on("click", function() {

    // 自分の手
    const clickedId = $(this).attr("id");
    let numA;
    if (clickedId === "gu")    numA = 1;
    if (clickedId === "choki") numA = 2;
    if (clickedId === "pa")    numA = 3;

    // 相手の手
    const numB = Math.floor(Math.random() * 3) + 1;
    let pcHandName = "";
    if (numB === 1) pcHandName = "グー";
    if (numB === 2) pcHandName = "チョキ";
    if (numB === 3) pcHandName = "パー";
    $("#pc-hand").html(pcHandName);

    // --- 勝敗判定 ---

    // 【A. あいこの場合】
    if (numA === numB) {
        $(".result").html("あいこ！もう一回！");
        $("body").css("background-color", "yellow"); 
        // あいこはボタンを消さないので、そのまま

    // 【B. 勝ちの場合】
    } else if (
        (numA === 1 && numB === 2) || 
        (numA === 2 && numB === 3) || 
        (numA === 3 && numB === 1)
    ) {
        $(".result").html("勝ち！おめでとう！");
        $("body").css("background-color", "pink");
        
        // ボタンを隠して、リセットボタンを出す！
        $(".choice-btn").hide();
        $("#restart-btn").show(); // ★ここが追加

    // 【C. 負けの場合】
    } else {
        $(".result").html("負け...残念...");
        $("body").css("background-color", "skyblue");
        
        // ボタンを隠して、リセットボタンを出す！
        $(".choice-btn").hide();
        $("#restart-btn").show(); // ★ここが追加
    }
});


// -------------------------------------------------
// 2. 「もう一度勝負する」ボタンが押されたら...
// -------------------------------------------------
$("#restart-btn").on("click", function() {
    
    // 画面を最初の状態に戻す
    $(".result").html("結果が表示されるよ");
    $("#pc-hand").html("まだ選んでいません");
    $("body").css("background-color", "white"); // 背景を白に戻す

    // ボタンの表示/非表示を元に戻す
    $(".choice-btn").show(); // じゃんけんボタンを復活
    $("#restart-btn").hide(); // リセットボタンを隠す

});
</script>
</body>
</html>
